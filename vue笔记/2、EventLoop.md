## 1、同步任务与异步任务

### 1、JavaScript 是单线程的语言

JavaScript 是一门**单线程执行**的编程语言，也就是说，**同一时间只能做一件事情。**

单线程执行任务队列的问题：

如果**前一个任务非常耗时**，则后续的任务就不得不一直等待，从而导致**程序假死**的问题。



### 2、同步任务和异步任务

为了防止某个**耗时任务**导致程序**假死**的问题，JavaScript 把待执行的任务分为了两类：

1. **同步任务**
   - 又叫**非耗时任务**，指的是在主线程上排队执行的那些任务
   - 只有前一个任务执行完毕，才能执行后一个任务
2. **异步任务**
   - 又叫**耗时任务**，异步任务有 JavaScript **委托给**宿主环境进行执行
   - 当异步任务执行完毕后，会**通知 JavaScript 主线程**执行异步任务的**回调函数**





### 3、同步任务与异步任务的执行过程

1. 同步任务有 JavaScript 主线程按**顺序**执行
2. 异步任务**委托给**宿主环境执行
3. 已完成的异步任务**对应的回调函数**，会被加入到任务队列中等待执行
4. JavaScript 主线程的**执行栈**被清空后，会读取任务队列中的回调函数，按**顺序**执行
5. **JavaScript 主线程不断重复上面的第四步**

**通俗理解：**就是，JavaScript 主线程里面有堆和栈，栈里面有同步和异步任务，先执行同步任务，再把异步任务放到宿主环境中执行（浏览器或 Node.js），执行完的异步任务的回调函数会放到任务队列中，**JavaScript 主线程会从任务队列中读取异步任务的回调函数，放到执行栈中依次执行。**





## 2、EventLoop（事件循环）的基本概念

**JavaScript 主线程会从任务队列中读取异步任务的回调函数，放到执行栈中依次执行。**这个过程是循环不断的，所以整个的这种运行机制又称为 **EventLoop** （事件循环）。





## 3、宏任务和微任务

### 1、什么是宏任务和微任务？

JavaScript 把异步任务又做了进一步的划分，**异步任务又分为两类**，分别是：

**1、宏任务（macrotask）**

- 异步 Ajax 请求
- setTimeout、setInterval
- 文件操作
- 其他宏任务

**2、微任务（micrortask）**

- Promise.then、 .catch 和  .finally
- process.nextTick
- 其他微任务

1

### 2、宏任务和微任务的执行顺序

**每**一个宏任务执行完之后，都会检查是否存在**待执行的微任务**，如果有，则执行完所有的微任务后，再继续执行下一个宏任务，如果没有，也继续执行下一个宏任务。





### 3、宏任务和微任务的经典面试题

1、new 的 promise 实例属于同步任务，它的  .then() 和其他一些方法属于微任务，延时器属于宏任务

执行顺序：先同步任务，待执行的微任务，然后是宏任务。