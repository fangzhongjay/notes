## 1、关于版本控制

### 1、什么是版本控制软件？

版本控制软件是一个用来**记录文件变化**，以便将来查阅特定的版本修订情况的系统，因此有时也叫做“**版本控制系统**”。

> 通俗理解：把手工管理文件版本的方式，改为软件管理文件的版本；这个负责管理文件版本的软件，也做“版本控制软件”。

### 2、使用版本控制软件的好处？

- 操作简便
- 易于对比
- 易于huisu
- 不易丢失
- 写作方便



### 3、版本控制系统的分类？

- **本地版本控制系统**：单机运行，使维护文件版本的操作工具化。
- **集中化的版本控制系统**：联网运行，支持多人协作开发；性能差，用户体验不好
- **分布式版本控制系统**：联网运行，支持多人协作开发；性能优秀，用户体验好**（代表：Git）**

***





## 2、Git 基础概念

### 1、什么是Git？

Git 是一个开源的分布式版本控制系统，是目前世界上最先进、最流行的版本控制系统。可以快速高效地处理从很小到非常大的项目版本管理。

特点：项目越大越复杂，协同开发者越多，越能体现出Git 的高性能和高可用性。



### 2、Git 的特性

Git 之所以快速和高效，主要依赖于它的如下两个特性：

1、直接记录快照，而非差异比较

2、近乎所有操作都是本地执行



### 3、SVN 的差异比较与Git 的记录快照

1、传统的版本控制系统（例如：SVN）是**基于差异**的版本控制，它们存储的是**一组基本文件**和**每个文件随时间逐步累积的差异。**

好处：节省磁盘空间

缺点：耗时、效率低

通俗理解：就是当文件更新了版本，新的版本里只记录的更新的内容，原来的文件没有记录下来。

在每次切换版本的时候，都需要在基本文件的基础上，应用每个差异，从而生成目标版本对应的文件。



2、**Git 的记录快照**是原有的基础上重新生成一份新的文件，**类似于备份**。为了效率，如果文件没有修改，Git不再重新存储该文件，而是保留一个链接指向之前存储的文件。

好处：**版本切换时非常快**，因为每个版本都是完整的文件快照，切换版本时直接恢复目标版本的快照即可。

特点：**空间换时间**



### 4、近乎所有操作都是本地执行

在Git 中的绝大多数操作都**只需要访问本地文件和资源，**一般不需要来自网络上其他计算机的信息。

特性：断网后依旧可以在本地对项目进行版本管理，只需在联网后，把本地修改的记录同步到云端服务器即可。



### 5、Git 中的三个区域

使用Git 管理的项目，拥有三个区域，分别是**工作区**，**暂存区**、**Git仓库**。



### 6、Git 中的三种状态

- 已修改（modified）:表示修改了文件，但还没将修改的结果放到暂存区。
- 已暂存（staged）:表示对已修改文件的当前版本做了标记，使之包含在下次提交的列表中。
- 已提交（committed）:表示文件已经安全地保存在本地的Git 仓库中。



### 7、基本的 Git 工作流程

在工作区中修改文件 => 将你想要下次提交的更改进行暂存 => 提交更新，找到暂存区的文件，将快照永久性



***





## 3、安装并配置 Git

### 1、Git 安装包网址

https://git-scm.com/downloads



### 2、配置用户信息

安装完Git之后，要做的第一件事就是设置自己的用户名和邮件地址。因为通过Git 对项目进行版本管理的时候，Git需要用到这些基本信息。

代码：

git config --global user.name "填写用户名"

git config --global user.email "填写自己的邮箱"

第一步

<img src="C:\Users\小灰灰\AppData\Roaming\Typora\typora-user-images\image-20220328134559021.png" alt="image-20220328134559021" style="zoom: 67%;" />



第二步

<img src="C:\Users\小灰灰\AppData\Roaming\Typora\typora-user-images\image-20220328134842467.png" alt="image-20220328134842467" style="zoom:67%;" />



代码中的 **git config** 是配置的意思  **--global** 是全局配置的意思。

注意：如果使用了 **--global** 选项，那么该命令只需要运行一次，即可永久生效。





### 3、检查配置信息

可以运行如下的终端的命令，快速的查看Git 的全局配置信息（两种方法）

1、查看所有的全局配置项  git config --list --global

2、查看指定的全局配置项   git config user.name       (假设想要查看的是用户名)

![image-20220328200704005](C:\Users\小灰灰\AppData\Roaming\Typora\typora-user-images\image-20220328200704005.png)





### 4、获取帮助信息

1、可以使用 git help <verb>命令 ，无需联网即可在浏览中打开帮助手册，

例如：想要等到关于 config 命令的使用方法

git help config



2、如果不想查看完整的手册，那么可以用 -h 选项获得更简明的 “help” 输出：（直接在终端上打印）

git config -h



***







## 4、Git 的基本操作

### 1、获取 Git 仓库的两种方式

1、将尚未进行版本控制的**本地目录转换为 Git 仓库**

2、从其他服务器**克隆**一个已存在的 Git 仓库

**以上两种方式都能在自己的电脑上得到一个可用的 Git 仓库。**



### 2、在现有目录中初始化仓库

如果自己有一个尚未进行版本控制的项目目录，想要用 Git 来控制它，需要执行如下两个步骤：

1、在项目目录中，通过鼠标右键打开“Git Bash”

2、执行 **git init 命令**将当前的目录转化为 Git 仓库

>git init  命令会创建一个名为 **.git 的隐藏目录**，这个 **.git 目录就是当前项目的 Git 仓库**，里面包含了初始的必要文件，这些文件是 Git 仓库的必要组成部分。



### 3、工作区中文件的4种状态

工作区中的每一个文件可能有**4种状态**，这四种状态共分为**两大类**。

首先分为1、未被 Git 管理  =>  未被跟踪 （Untracked）（不被 Git 所管理的文件）

​	       	2、已被 Git 管理 =>  未修改（Unmodified）（工作区中文件的内容和 Git 仓库中文件的内容保持一致）

​								        	 => 已修改（Modified）（工作区中文件的内容和 Git 仓库中文件的内容不一致）

​								             => 已暂存（Staged）（工作区中被修改的文件已被放到暂存区，准备被修改后的文件保存到 Git仓库中）

> Git 操作的终极结果：让工作区中的文件都处于 “未修改”的状态





### 4、检查文件的状态

1、可以使用 **git status** 命令查看文件处于什么状态 (返回结果较繁琐)

<img src="C:\Users\小灰灰\AppData\Roaming\Typora\typora-user-images\image-20220328205847422.png" alt="image-20220328205847422" style="zoom:50%;" />

<img src="C:\Users\小灰灰\AppData\Roaming\Typora\typora-user-images\image-20220328205934232.png" alt="image-20220328205934232" style="zoom: 67%;" />

写了代码按回车之后，可以在状态报告中可以看到新建的**1.html**  文件出现在 **Untracked files（未被跟踪的文件）**下面。未被跟踪的文件意味着 **Git 在之前的快照（提交）中没有这些文件**； Git不会自动将之纳入跟踪范围，除非明确地告诉我，“我需要使用 Git跟踪管理该文件”



2、**git status -s**    (返回结果较精简，**-s  是 --short 的简写形式**)：

返回结果中**未被跟踪文件**前面有**红色的** **??** 标记。



### 5、跟踪新文件

使用 **git add** 开始跟踪一个文件，举例要跟踪 1.html  文件

>  **git add 1.html**

此时再运行 检查文件状态的代码  git status ,会看到 1.html 文件在 **Changes to be committed** 下面，说明该文件已被跟踪，并处于暂存状态。（用**精简方式 git status -s**    **新添加到暂存区的文件**前面有**绿色的 A** 标记）



### 6、提交更新

**git commit  提交命令**

现在暂存区里有一个 1.html 文件等待被**提交到 Git仓库**中保存，可以执行 **git commit 命令**进行提交，其中 -m 选项后面是本次的提交信息，用来**对提交的内容做进一步的描述。**

> git commit -m "提交了1.html 文件"

**提交到仓库的文件处于“未修改”的状态。**



### 7、对已提交的文件进行修改

目前1.html 文件已经被 Git 跟踪，并且工作区 和 Git仓库中的 1.html 文件内容保持一致。当我们**修改**了工作区中的 1.html 内容之后，再次运行 **查看文件状态的代码  git  status ,**会发现 1.html  文件出现在 **Changes not staged for commit** 这行下面，并且里面显示**红色的 modified: 1.html**,   说明已跟踪的文件的内容发了变化，但还没有放到暂存区。

（用**精简方式 git status -s**    **修改过的、没有放入暂存区的文件**前面有**红色的M** 标记）



### 8、暂存已修改的文件

目前 ， 1.html  文件已被修改，如果要暂存这次修改，需要再次运行 git add 命令，这个命令是一个多功能的命令，主要有如下3个功效：

- 可以用它开始**跟踪新文件**，**并放到暂存区**。
- 把**已跟踪的、且已修改**的文件放到**暂存区**。
- 把**有冲突的**文件标记为以解决的状态。

再次运行 **查看 文件状态的代码  git  status ,**里面显示**绿色的 modified: 1.html**。

（用**精简方式 git status -s**    **修改过的、且已放入暂存区的文件**前面有**绿色的M** 标记）



### 9、提交已暂存的文件

再次运行 git commit -m "提交信息" 命令，即可将暂存区中记录的index.html  的快照，提交到 Git 仓库中进行保存。

补加： clear 是清空命令，方便整洁。



### 10、撤销对文件的修改

**git checkout  --  1.html          （以 1.html  文件举例）**

撤销对文件的修改指的是：对工作区中对应文件的修改，还原成 Git 之前**所保存的版本。**

**危险性较高，请谨慎操作。**

> 撤销操作的本质：用 Git 仓库中保存的文件，覆盖工作区中指定的文件



### 11、向暂存区中一次性添加多个文件

如果需要被暂存的文件个数比较多，可以使用如下的命令，一次性将所有的新增和修改过的文件加入暂存区：

**git add  .**

> **今后在项目开发中，会经常使用这个命令，将新增和修改过后的文件加入暂存区。**



### 12、取消暂存区的文件

如果需要从暂存区中移除对应的文件，可以使用如下的命令：

git reset HEAD 1.html              （ 这里用 1.html 举例 ）

如果需要把暂存区**所有的文件移除**，可以使用   git reset HEAD .   跟之前的  类似。   



### 13、跳过使用暂存区域

Git 标准的工作流程是    **工作区  =>  暂存区  =>   Git 仓库**，但是有时候这么做略显繁琐，此时可以跳过暂存区，直接将工作区的修改提交到 Git 仓库，这时候 Git 工作的流程 简化为： **工作区  =>   Git 仓库**

Git 提供了一个可以跳过使用暂存区域的方式，只要在提交的时候，给 git commit 加上 -a 选项， Git 会自动把所有跟踪过的文件暂存起来一并提交，从而跳过 git add 步骤：

git commit -a -m "描述信息"



### 14、移除文件

1、**git rm -f 1.html**    (以1.html 文件举例 ) 从**Git 仓库和工作区**中同时移除对应的文件 。

（用**精简方式 git status -s**   前面有**绿色的D** 标记）

1、**git rm --cached 1.html**    (以1.html 文件举例 ) 从Git 仓库中移除对应的文件 。

（用**精简方式 git status -s**   前面有**绿色的D** 标记,并且还有一个 **红色的??** 标记，表示未被跟踪）

  

### 15、忽略文件

1、一般我们总会有些文件无需纳入 Git 的管理，也不希望它们总出现在未跟踪文件列表，在这种情况下，我们可以创建一个名为    .gitignore   的配置文件，列出要忽略的文件的匹配模式。

文件  **.gitignore**  格式规范如下：

- 以 **# 开头**的是注释
- 以 **/ 结尾**的是目录
- 以 **/ 开头**防止递归
- 以 **！开头**表示取反
- 可以使用 **glob  模式**进行文件和文件夹的匹配（glob 指简化了的正则表达式）



**2、glob 模式**

- **星号  *** 匹配零个或多个任意字符
- **[abc]**  匹配任何一个列在方括号中的字符（匹配一个a , 匹配一个 b 或者匹配 一个 c）
- **问号 ？** 只匹配任意一个字符
- 方括号中使用**短划线**分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如[0-9]）表示匹配所有 0到 9 的数字）
- **两个星号  **** 表示**匹配任意中间目录** （比如a/**/  可以匹配 a/z  、 a/b/z  或 a / b / c/ z 等）

举例

~~~javascript
# 忽略所有的 .a 文件
 * .a
 
# 跟踪所有的 lib.a 文件，即使你前面忽略了 .a 文件
!lib.a

# 只忽略当前目录下的 TO 文件，而不忽略 subdir/ TO 
/TO 

# 忽略任何目录下名为  build 的文件夹
build/
   
# 忽略 doc/notes.txt , 但不忽略  doc/server/arch.txt
doc/*.txt

# 忽略 doc/ 目录及其所有子目录下的 .pdf 文件
doc/**/*.pdf
~~~



### 16、查看提交历史

如果希望回顾项目的提交历史，可以使用  **git log** 这个简单且有效的命令。

-  **git log**    (按时间的先后顺序列出所有的提交历史，最近的提交排到最上面，如果历史太长了，输入 q 回车即可退出)
- **git log -2** (只展示最新的两条提交历史，数字可以按需更改)
- **git log -2 --pretty=online** (在一行上展示最近两条提交历史的信息)
- **git log -2 --pretty=format:"%h | %an | %ar | %s"**(在一行上展示最近两条提交历史的信息,并且自定义输出的格式， %h  提交的简写哈希值   %an 作者的名字    %ar  作者修订日期，按多久以前的方式显示   %s  提交说明)





### 17、回退到指定的版本

1、先在一行上展示所有的提交历史 

 **git log  --pretty=oneline**



2、再使用 git reset --hard 命令，根据指定返回来的提交历史的 ID 回退到指定版本

**git reset --hard  < CommitID>**



3、在旧版本时，展示提交历史 改为这个 

**git reflog --pretty=online**



4、再次根据最新的提交 ID ，跳转到最新的版本

**git reset --hard  < CommitID>**

